@using CULTMACEDONIA_v2.Helpers;
@using CULTMACEDONIA_v2.Models;

@model CULTMACEDONIA_v2.Models.PointFullViewModel


@{
    ViewBag.Title = ViewBag.Title = @Model.PointName;
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}

@section styles {
    <link rel="stylesheet" href="http://blueimp.github.io/Gallery/css/blueimp-gallery.min.css">
    <link href="~/Content/css/bootstrap-image-gallery.css" rel="stylesheet" />
    <link href="~/Content/css/cultmaced.sidebar.css" rel="stylesheet" />
}

@{
    string url = string.IsNullOrEmpty(@Model.PointWeb) ? @CultResources.View.NotAvailable : @Model.PointWeb;
    string urllink = string.IsNullOrEmpty(@Model.PointWeb) ? "#" : @Model.PointWeb;

    string mail = string.IsNullOrEmpty(@Model.PointEmail) ? @CultResources.View.NotAvailable : @Model.PointEmail;
    string phone = string.IsNullOrEmpty(@Model.PointPhone) ? @CultResources.View.NotAvailable : @Model.PointPhone;

}

@Html.Partial("_PageHeader")

<div id="wrap">


    <div class="container offset-top">

        <div class="row ">


            <!-- Point main view container-->
            <div class="col-lg-8 contents">
                <div class="row pointInfoSection">
                    <div class="">
                        <h1 class="page-header">@CultResources.View.Monuments <small>@CultResources.View.ViewMonument</small></h1>
                        <ol class="breadcrumb">
                            @CultResources.Shared.YouAreHere
                            <li><a href=@Url.Action("Index","Home") title="@CultResources.Shared.AppName @CultResources.Shared.AppSurname">@CultResources.View.Home</a></li>
                            <li class="active">@CultResources.View.ViewMonument</li>
                            <li><span class="pull-right"> @Model.PointName</span></li>

                        </ol>
                    </div>
                    <!-- MainInfo -->
                    <div class="panel panel-default pointMainInfo">
                        <div class="panel-body pointMainInfoPanel">
                            <div class="media ">
                                <div class="">
                                    <a href="#" class="pull-left mainIcon">

                                        @if (Model.PointImage.Count() != 0)
                                        {
                                            <img alt="@Model.PointName" class="media-object" style="width: 128px; height: 128px;"
                                                 src="@Model.PointImage.FirstOrDefault().ImageFilePath">
                                        }
                                        else
                                        {
                                            <img class="media-object" alt="CultMacedonia" title="CultMacedonia"
                                                 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAP0AAAC9CAIAAAD3D+zHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA1MjFDNTg0QjUyRjExRTNCQkNFQUZDQTE3Mzk1MkQ5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA1MjFDNTg1QjUyRjExRTNCQkNFQUZDQTE3Mzk1MkQ5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDUyMUM1ODJCNTJGMTFFM0JCQ0VBRkNBMTczOTUyRDkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDUyMUM1ODNCNTJGMTFFM0JCQ0VBRkNBMTczOTUyRDkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6Ul9H4AAADxUlEQVR42uzdPUsjaxiA4U0yagLKlFbxN6it2lhYWPgP9M+lEnstxIA2FoJgoabxC0UECw1+DWHHnIcTWITlnGYnbBKvq1IjE3i58+YZyYylLMt+wDdTtgToHnQPugfdg+5B96B70D3oHnQPugfdg+5B96B70D3oHnSP7kH3oHvQPegedA+6B92D7kH3oHvQPegedA+6B92D7kH36B50D7oH3YPuQfege9A96B50D7oH3YPuQfege9A96B50D7pH96B70D3oHnQPugfdg+5B96B70D3oHnQPugfdg+5B96B7dA+6B93DCEosQVGazebt7e34+Hifjt/pdOr1+vLysqXW/QCJ6FutVrVazfO88INXKpUsyyyy7gdO7PQR/dTUVJqmpVKpwCN3u912u917Cuus+4ETO31Ev76+HttzsYdtNBrPz89WWPcDKnb6JEnK5XKxxyz2DQR/zylejCUDfkB0j+5B96B70D3oHnQPugfdg+5B96Or0+k0m82zszNLMSB8Lq3v7u/vd3d3r6+vq9VqlmXz8/PWRPcj7ujo6ODg4OPjo1ar5Xm+s7Pz9va2tLRkZXQ/mp6envb29lqtVqVS6V0vEl+USqX9/f1If2VlpdjPKqP7v33OVC5H2Zubm4+Pj1H814/Ox0NjY2PxJvD+/r66uhqTz6+HHh4ejo+Pu93u4uJimqaWUfdDJkKPOf7l5SUS//16kfjJxMTE6elpDD9ra2uTk5OXl5cnJycXFxe9K2jj24WFhdnZWW8Iuh/KXf9/LjCP9K+urra2tmLLv7m5id9MkiR+GA+9vr5ub2+fn5/HacDMzIyV1P1IiREoZpsYbKL4r9fjxtfxmolXxd3d3dzcXIw9X8chitmVLMHf3HWS5L9moXhVfH5+Hh4exthj4NH995qU4oUR9VsK3X/Hs2SLYL4fGj//9ScjSoz+cQQ3U9D9cOidqk5PT/9593me12o1S6r74eg+TdONjY2ipnwjvvl+CKKPbb7AW8PGoUw79vuBVqlU2u12o9Hox31hi73npu4pRqfT6X3QoB83cO3dBzyewjrrfrDU6/Uf/bxVd+//PljnQpT8NwGc14LuQfege9A96B50D7oH3YPuQfege9A96B50D7oH3YPu0T3oHnQPugfdg+5B96B70D3oHnQPugfdg+5B96B70D3oHt2D7kH3oHvQPegedA+6B92D7kH3oHvQPegedA+6B92D7kH36B50D7oH3YPuQfege9A96B50D7oH3YPuQfege9A96B50j+5B96B7GEH/CDAA55UVqV0DzYMAAAAASUVORK5CYII="
                                                 style="width: 128px; height: 128px;" />
                                        }


                                    </a>


                                    <div class="media-body mainInfo col-lg-9">

                                        @if (Request.IsAuthenticated)
                                        {
                                            <div id="panelFavorite" class="row">
                                                @Html.Action("UserFavoritePointPartial", new { @pointId = Model.PointId, @isFavorite = @Model.isUserFavorite })
                                            </div>
                                        }
                                        <h4 class="media-heading pointName">@Html.DisplayFor(model => model.PointName)</h4>
                                        <div class="categories">

                                            <a class="categorylink" href="@Url.Action("category", "Points" , new { cid=Model.PointCategoryId })">@Html.DisplayFor(model => model.Category.CategoryName)</a>
                                        </div>
                                        <div class="address">
                                            <span class="addr"><span class="fa fa-road"></span> @Html.DisplayFor(model => model.PointAddress)</span>,
                                            <span class="town"><span class="fa fa-home"></span> @Html.DisplayFor(model => model.PointPlaceNomos)</span>
                                            <a class="addrlink" href="http://maps.google.com/maps?daddr=37.98483860692609,23.760989606380463"><span class="fa fa-map-marker"></span></a>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="details row">
                                <div class="phone col-lg-4"><span class="fa fa-phone-square"></span> <span class="item-value">@phone</span></div>
                                <div class="mail col-lg-4"><span class="fa fa-envelope"></span> <span class="item-value">@mail</span></div>
                                <div class="web col-lg-4">
                                    <span class="fa fa-globe"></span>
                                    @if (@Model.PointWeb == null)
                                    {
                                        <span class="item-value">@url</span>
                                    }
                                    else
                                    {
                                        <span class="item-value"><a href='@urllink' title="@Model.PointWeb">@url</a></span>
                                    }

                                </div>
                            </div>
                            <div class="description">
                                <span class="attrKey">@CultResources.View.LabelPointDescription</span>
                                <p class="attrValue">
                                    @Html.DisplayFor(model => model.PointDescription)
                                </p>
                            </div>


                            <div class="details contact">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="row attrrow">
                                            <div class="col-lg-3 attrKey">@CultResources.View.labelYear</div>
                                            <div class="col-lg-8 attrValue">
                                                @if (Model.PointYear != null)
                                                {
                                                    @Html.DisplayFor(model => model.PointYear)
                                                }
                                                else if (!string.IsNullOrEmpty(Model.PointYearDescription))
                                                {
                                                    @Html.DisplayFor(model => model.PointYearDescription)
                                                }


                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="row attrrow">
                                            <div class="col-lg-7 attrKey">@CultResources.View.CategoryCaption</div>
                                            <div class="col-lg-5 attrValue">@Html.DisplayFor(model => model.Category.CategoryName)</div>
                                        </div>
                                        <div class="row attrrow">
                                            <div class="col-lg-7 attrKey">@CultResources.View.EraCaption</div>
                                            <div class="col-lg-5 attrValue">@Html.DisplayFor(model => model.Era.EraName)</div>
                                        </div>
                                        <div class="row attrrow">
                                            <div class="col-lg-7 attrKey">@CultResources.View.PropectionCaption</div>
                                            <div class="col-lg-5 attrValue">@Html.DisplayFor(model => model.ProtectionLevel.ProtectionName)</div>
                                        </div>
                                        <div class="row attrrow">
                                            <div class="col-lg-7 attrKey">@CultResources.View.PropertyCaption</div>
                                            <div class="col-lg-5 attrValue">@Html.DisplayFor(model => model.Property.PropertyName)</div>
                                        </div>
                                        <div class="row attrrow">
                                            <div class="col-lg-7 attrKey">@CultResources.View.EthnologicalCaption</div>
                                            <div class="col-lg-5 attrValue">@Html.DisplayFor(model => model.Ethnological.EthnologicalName)</div>
                                        </div>
                                        <div class="row attrrow">
                                            <div class="col-lg-7 attrKey">@CultResources.View.ReligionCaption</div>
                                            <div class="col-lg-5 attrValue">@Html.DisplayFor(model => model.Religion.ReligionName)</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- MainInfo Panel ends here -->
                    <!-- PhotoGallery -->
                    <div id="photos" class="panel panel-default pointPhotoGallery">
                        <div class="panel-body pointMainPhotoPanel">
                            <div class="pointPhotosPanel">
                                <div class="row images">
                                    <div class="col-md-6">
                                        <!-- Total Photos for Point -->
                                        @{ int pntImageCnt = @Model.PointImage.Count; }
                                        <h4 class="media-heading pointName">
                                            @CultResources.View.PhotoGalleryPanelText
                                            @{
                                                string imgCnt = pntImageCnt == 0 ? "" : "(" + pntImageCnt + ")";
                                            }
                                        </h4>
                                    </div>
                                    <div class="col-md-6 pull-right">
                                        <!-- Point Photos Gallery controls -->
                                        <form class="form-inline">
                                            <div class="form-group">
                                                <button id="image-gallery-button" type="button" class="btn btn-primary btn-xs">
                                                    <i class="fa fa-picture-o"></i>
                                                    @CultResources.View.LaunchGalleryText
                                                </button>
                                            </div>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label class="btn btn-success btn-xs">
                                                    <i class="fa fa-leaf"></i>
                                                    <input id="borderless-checkbox" type="checkbox"> @CultResources.View.BorderlessText
                                                </label>
                                                <label class="btn btn-primary btn-xs">
                                                    <i class="fa fa-arrows-alt"></i>
                                                    <input id="fullscreen-checkbox" type="checkbox"> @CultResources.View.FullScreenText
                                                </label>
                                            </div>
                                        </form>
                                    </div>
                                </div>

                                <div class="" id="links">

                                    @if (pntImageCnt > 0)
                                    {

                                        foreach (CULTMACEDONIA_v2.Models.CultMacedoniaModel.PointImage i in Model.PointImage)
                                        {
                                    @*<div class="col-md-@(pntImageCnt-1)">*@
                                    <a href='@i.ImageFilePath' title='@i.ImageTitle' data-gallery="">
                                        <img src="@i.ImageFilePath" alt="@i.ImageTitle" width="128" height="128" />
                                    </a>
                                    @*</div>*@
                                        }
                                    }
                                    else
                                    {
                                    <p class="col-xs-12"> @string.Format(@CultResources.View.NoImagesAvailable, Model.PointName)</p>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- PhotoGallery Panel ends here -->
                    <!-- VideoGallery -->
                    <div id="videos" class="panel panel-default pointVideoGallery">
                        <div class="panel-body pointMainVideoPanel">
                            <div class="pointVideoPanel">
                                <div class="row videos">
                                    <div class="col-md-7">

                                        <!-- TODO otal Photos for Point -->
                                        @{
                                            CULTMACEDONIA_v2.Models.CultMacedoniaModel.PointVideo video;

                                            int pntVideoCnt = Model.PointVideo.Count();
                                            if (pntVideoCnt == 1)
                                            {
                                                video = Model.PointVideo.SingleOrDefault();
                                            }
                                            else if (pntVideoCnt > 1)
                                            {
                                                video = Model.PointVideo.FirstOrDefault();
                                            }
                                            else
                                            {
                                                video = null;
                                            }


                                        }
                                        <h4 class="media-heading ">@CultResources.View.VideoGalleryPanelText</h4>
                                    </div>
                                </div>




                            </div>
                            <div class="row">
                                @if (video == null || video.VideoFilePath == null)
                                {
                                <p class="col-xs-12"> @string.Format(@CultResources.View.NoVideoAvailable, Model.PointName)</p>
                                }
                                else
                                {
                                <video controls="" id="pointvideo" class="col-xs-12">
                                    <source type="video/mp4" src="@video.VideoFilePath">

                                </video>
                                }
                            </div>
                        </div>
                    </div>
                    <!-- VideoGallery Panel ends here -->
                    <!-- Comments -->
                    <div id="comments" class="panel panel-default pointComments" style="display:none;">
                        <div class="panel-body pointCommentsPanel">
                            <h4 class="media-heading ">Σχόλια Χρηστών </h4>

                        </div>
                    </div>
                    <!-- Comments Panel ends here -->
                    <!-- Ratings -->
                    <div id="ratings" class="panel panel-default pointRatings" style="display:none;">
                        <div class="panel-body pointRatingsPanel">
                            <h4 class="media-heading ">Βαθμολογίες</h4>

                        </div>
                    </div>
                    <!-- Ratings Panel ends here -->
                </div>
            </div>
            <!-- Sidebar & Navigation container -->
            <div class="col-lg-4 " role="navigation">
                <div role="complementary" class="bs-sidebar hidden-print affix">

                    <div class="pointview-navigation">


                        



                        <ul class="nav bs-sidenav">
  
                            <li>
                                <a href="#top"><i class="fa fa-suitcase"></i> @CultResources.View.InfoPanelText </a>
                            </li>

                            <li>
                                <a href="#photos"><i class="fa fa-camera-retro"></i> @CultResources.View.PhotoGalleryPanelText </a>
                            </li>
                            <li>
                                <a href="#videos"><i class="fa fa-youtube-play"></i> @CultResources.View.VideoGalleryPanelText</a>
                               
                            </li>
                            <li>
                                <a href="#comments"><i class="fa fa-comments"></i> @CultResources.View.CommentPanelText</a>
                            </li>
                            <li>
                                <a href="#ratings"><i class="fa fa-star"></i> @CultResources.View.RatingsPanelText</a>
                            </li>

                        </ul>


                    </div>

                    <h4>@CultResources.View.ViewonMap <small>@Model.PointX, @Model.PointY</small></h4>

                    <div id="map_canvas">
                    </div>

                </div>

                @*Δημιουργία αντικειμένου για την προβολή στο χάρτη*@
                @{

                    PointMapViewModel pointvm = new PointMapViewModel();
                    pointvm.PlaceName = @Model.PointName;
                    pointvm.GeoLong = @Model.PointX;
                    pointvm.GeoLat = @Model.PointY;
                    pointvm.PlaceAddress = @Model.PointAddress;
                    pointvm.SingleImage = @Model.PointImage.Count() == 0 ? "" : @Model.PointImage.FirstOrDefault().ImageFilePath;

                }


            </div>
        </div>

    </div>
</div>

@section scripts {

    <script type="text/javascript">

        $(document).ready(function () {
            // δημιουργια αντικειμενου για προβολη στον χαρτη
            // γινεται αρχικοποιηση με χρηση Object Initializer
            point = {
                'x': '@pointvm.GeoLong'.replace(",", "."),
                'y': '@pointvm.GeoLat'.replace(",", "."),
                'name': '@pointvm.PlaceName',
                'addr': '@pointvm.PlaceAddress',
                'img': '@pointvm.SingleImage'
            };

            // κληση της συνάρτησης για προβολή σημειου στον χάρτη
            showMapPoint(point);

        });


    </script>
    <script src="http://blueimp.github.io/Gallery/js/jquery.blueimp-gallery.min.js"></script>
    <script src="~/Content/scripts/bootstrap-image-gallery.js"></script>
    <script src="~/Content/scripts/demo.js"></script>
}


